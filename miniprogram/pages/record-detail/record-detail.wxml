<!--pages/record-detail/record-detail.wxml-->
<view class="page-container">
  <view class="content-container">
    <!-- è®°å½•å¤´éƒ¨ -->
    <view class="record-header">
      <view class="date-info">
        <text class="date-text">{{record.date}}</text>
        <text class="day-text">{{dayOfWeek}}</text>
      </view>
      <view class="modules-info">
        <text class="module-tag completed" wx:if="{{record.questions && record.questions.length > 0}}">é¢„ä¹ </text>
        <text class="module-tag completed" wx:if="{{record.videoUrl}}">è§†é¢‘</text>
        <text class="module-tag completed" wx:if="{{record.diary}}">æ—¥è®°</text>
      </view>
    </view>

    <!-- é¢„ä¹ é—®é¢˜ -->
    <view class="section" wx:if="{{record.questions && record.questions.length > 0}}">
      <view class="section-header">
        <text class="section-title">é¢„ä¹ æé—®</text>
        <text class="section-count">{{record.questions.length}}ä¸ªé—®é¢˜</text>
      </view>
      <view class="questions-list">
        <view class="question-item" wx:for="{{record.questions}}" wx:key="index">
          <view class="question-number">{{index + 1}}</view>
          <text class="question-text">{{item}}</text>
        </view>
      </view>
    </view>

    <!-- è§†é¢‘è®²è§£ -->
    <view class="section" wx:if="{{record.videoUrl}}">
      <view class="section-header">
        <text class="section-title">è§†é¢‘è®²è§£</text>
      </view>
      <view class="video-container">
        <video 
          src="{{record.videoUrl}}" 
          controls 
          class="video-player"
          poster="{{record.videoCover}}"
          show-center-play-btn="{{true}}"
          show-play-btn="{{true}}">
        </video>
      </view>
    </view>

    <!-- å­¦ä¹ æ—¥è®° -->
    <view class="section" wx:if="{{record.diary}}">
      <view class="section-header">
        <text class="section-title">å­¦ä¹ æ—¥è®°</text>
      </view>
      <view class="diary-content">
        <text class="diary-text">{{record.diary}}</text>
      </view>
    </view>

    <!-- å›¾ç‰‡é™„ä»¶ -->
    <view class="section" wx:if="{{record.images && record.images.length > 0}}">
      <view class="section-header">
        <text class="section-title">å›¾ç‰‡é™„ä»¶</text>
        <text class="section-count">{{record.images.length}}å¼ </text>
      </view>
      <view class="images-grid">
        <image 
          class="image-item" 
          src="{{item}}" 
          mode="aspectFill"
          wx:for="{{record.images}}" 
          wx:key="index"
          bindtap="previewImage"
          data-index="{{index}}">
        </image>
      </view>
    </view>

    <!-- æ“ä½œæŒ‰é’® -->
    <view class="actions">
      <button class="action-btn secondary" bindtap="shareRecord">
        <text class="btn-icon">ğŸ“¤</text>
        <text class="btn-text">åˆ†äº«</text>
      </button>
      <button class="action-btn secondary" bindtap="exportRecord">
        <text class="btn-icon">ğŸ“„</text>
        <text class="btn-text">å¯¼å‡º</text>
      </button>
    </view>
  </view>
</view>