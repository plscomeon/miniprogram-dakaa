<!--pages/userProfile/userProfile.wxml-->
<view class="profile-container">
  <view class="profile-header">
    <text class="profile-title">完善个人信息</text>
    <text class="profile-subtitle">请设置您的头像和昵称</text>
  </view>

  <view class="profile-form">
    <!-- 头像选择 -->
    <view class="form-item">
      <text class="form-label">头像</text>
      <button class="avatar-wrapper" open-type="chooseAvatar" bind:chooseavatar="onChooseAvatar">
        <image class="avatar" src="{{avatarUrl}}" mode="aspectFill"></image>
        <view class="avatar-overlay">
          <text class="avatar-text">点击选择头像</text>
        </view>
      </button>
    </view>

    <!-- 昵称输入 -->
    <view class="form-item">
      <text class="form-label">昵称</text>
      <form bindsubmit="onSubmit">
        <input 
          type="nickname" 
          class="nickname-input" 
          placeholder="请输入昵称"
          value="{{nickname}}"
          bindinput="onNicknameInput"
          bindblur="onNicknameBlur"
          maxlength="20"
        />
        <view class="char-count">{{nickname.length}}/20</view>
        
        <!-- 提交按钮 -->
        <view class="submit-section">
          <button 
            form-type="submit" 
            class="submit-btn" 
            disabled="{{!canSubmit || submitting}}"
          >
            {{submitting ? '保存中...' : '保存信息'}}
          </button>
        </view>
      </form>
    </view>
  </view>

  <view class="tips-section">
    <text class="tips-title">温馨提示：</text>
    <text class="tips-text">• 头像和昵称将用于个性化显示</text>
    <text class="tips-text">• 信息将经过微信安全检测</text>
    <text class="tips-text">• 您可以随时在个人中心修改</text>
  </view>
</view>